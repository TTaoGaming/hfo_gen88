{"files":{"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/contracts/index.ts":{"language":"typescript","mutants":[{"id":"24","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Property failed after 1 tests\n{ seed: 1500679350, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [{\"name\":0,\"value\":\"\"}]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":false,"testsCompleted":9,"killedBy":["8","1","22"],"coveredBy":["0","1","5","6","7","8","15","16","22"],"location":{"end":{"column":21,"line":91},"start":{"column":7,"line":91}}},{"id":"23","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'success')","status":"Killed","static":false,"testsCompleted":9,"killedBy":["0","1","5","6","7","8","15","16","22"],"coveredBy":["0","1","5","6","7","8","15","16","22"],"location":{"end":{"column":2,"line":98},"start":{"column":134,"line":89}}},{"id":"26","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Property failed after 1 tests\n{ seed: 77798396, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"name\":\" \",\"value\":0}]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":false,"testsCompleted":6,"killedBy":["7","0","5","6","15","16"],"coveredBy":["0","5","6","7","15","16"],"location":{"end":{"column":4,"line":93},"start":{"column":23,"line":91}}},{"id":"25","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Property failed after 1 tests\n{ seed: -2105211938, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"name\":\" \",\"value\":0}]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":false,"testsCompleted":9,"killedBy":["7","0","5","6","15","16"],"coveredBy":["0","1","5","6","7","8","15","16","22"],"location":{"end":{"column":21,"line":91},"start":{"column":7,"line":91}}},{"id":"27","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Property failed after 1 tests\n{ seed: 411878165, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"name\":\" \",\"value\":0}]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":false,"testsCompleted":6,"killedBy":["7","0","5","6","15","16"],"coveredBy":["0","5","6","7","15","16"],"location":{"end":{"column":48,"line":92},"start":{"column":12,"line":92}}},{"id":"28","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Property failed after 1 tests\n{ seed: 521358805, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"name\":\" \",\"value\":0}]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":false,"testsCompleted":6,"killedBy":["7","0","5","6","15","16"],"coveredBy":["0","5","6","7","15","16"],"location":{"end":{"column":27,"line":92},"start":{"column":23,"line":92}}},{"id":"29","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Property failed after 1 tests\n{ seed: 725164098, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [{\"name\":0,\"value\":\"\"}]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":false,"testsCompleted":3,"killedBy":["8","1","22"],"coveredBy":["1","8","22"],"location":{"end":{"column":4,"line":97},"start":{"column":10,"line":94}}},{"id":"30","mutatorName":"BooleanLiteral","replacement":"true","statusReason":"Property failed after 1 tests\n{ seed: -23094637, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"name\":0,\"value\":\"\"}]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":false,"testsCompleted":3,"killedBy":["8","1","22"],"coveredBy":["1","8","22"],"location":{"end":{"column":19,"line":95},"start":{"column":14,"line":95}}},{"id":"31","mutatorName":"ArrowFunction","replacement":"() => undefined","statusReason":"expected [ undefined ] to include 'age: Expected number, received string'","status":"Killed","static":false,"testsCompleted":3,"killedBy":["1","22"],"coveredBy":["1","8","22"],"location":{"end":{"column":77,"line":96},"start":{"column":37,"line":96}}},{"id":"32","mutatorName":"StringLiteral","replacement":"``","statusReason":"expected [ '' ] to include 'age: Expected number, received string'","status":"Killed","static":false,"testsCompleted":3,"killedBy":["1","22"],"coveredBy":["1","8","22"],"location":{"end":{"column":77,"line":96},"start":{"column":42,"line":96}}},{"id":"33","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"expected 'deepfield: Expected string, received â€¦' to contain 'deep.field'","status":"Killed","static":false,"testsCompleted":3,"killedBy":["22"],"coveredBy":["1","8","22"],"location":{"end":{"column":60,"line":96},"start":{"column":57,"line":96}}},{"id":"34","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'safeParse')","status":"Killed","static":false,"testsCompleted":4,"killedBy":["16","2","3","9"],"coveredBy":["2","3","9","16"],"location":{"end":{"column":2,"line":111},"start":{"column":23,"line":109}}},{"id":"35","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"expected '' to be 'normal' // Object.is equality","status":"Killed","static":false,"testsCompleted":1,"killedBy":["4"],"coveredBy":["4"],"location":{"end":{"column":62,"line":123},"start":{"column":54,"line":123}}},{"id":"36","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Cannot read properties of undefined (reading 'sourcePort')","status":"Killed","static":false,"testsCompleted":1,"killedBy":["4"],"coveredBy":["4"],"location":{"end":{"column":2,"line":137},"start":{"column":16,"line":124}}},{"id":"37","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"expected undefined to be 1 // Object.is equality","status":"Killed","static":false,"testsCompleted":1,"killedBy":["4"],"coveredBy":["4"],"location":{"end":{"column":4,"line":136},"start":{"column":10,"line":125}}},{"id":"38","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"expected undefined to be 'normal' // Object.is equality","status":"Killed","static":false,"testsCompleted":1,"killedBy":["4"],"coveredBy":["4"],"location":{"end":{"column":6,"line":135},"start":{"column":15,"line":132}}},{"id":"0","mutatorName":"ArrayDeclaration","replacement":"[]","statusReason":"expected false to be true // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["15","5","6","10"],"coveredBy":[],"location":{"end":{"column":2,"line":48},"start":{"column":34,"line":39}}},{"id":"1","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 14 tests\n{ seed: -2140268222, path: \"13:0:0:0:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"OBSERVE\",\"payload\":{},\"correlationId\":undefined}]\nShrunk 9 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10","5"],"coveredBy":[],"location":{"end":{"column":12,"line":40},"start":{"column":3,"line":40}}},{"id":"2","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 5 tests\n{ seed: 1014253170, path: \"4:0:0:0:0:0:0:1:1:1\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"BRIDGE\",\"payload\":0,\"correlationId\":undefined}]\nShrunk 9 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10","15","6"],"coveredBy":[],"location":{"end":{"column":11,"line":41},"start":{"column":3,"line":41}}},{"id":"3","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 5 tests\n{ seed: 1655736964, path: \"4:0:0:0:0:0:0:1:1:1\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"SHAPE\",\"payload\":{},\"correlationId\":undefined}]\nShrunk 9 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10"],"coveredBy":[],"location":{"end":{"column":10,"line":42},"start":{"column":3,"line":42}}},{"id":"4","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 18 tests\n{ seed: -1053082837, path: \"17:0:0:0:0:0:1:1\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"INJECT\",\"payload\":[],\"correlationId\":undefined}]\nShrunk 7 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10"],"coveredBy":[],"location":{"end":{"column":11,"line":43},"start":{"column":3,"line":43}}},{"id":"5","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 7 tests\n{ seed: 1303837101, path: \"6:0:0:0:0:0:0:1:1\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"DISRUPT\",\"payload\":[],\"correlationId\":undefined}]\nShrunk 8 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10"],"coveredBy":[],"location":{"end":{"column":12,"line":44},"start":{"column":3,"line":44}}},{"id":"6","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 3 tests\n{ seed: 1512623879, path: \"2:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"IMMUNIZE\",\"payload\":false,\"correlationId\":undefined}]\nShrunk 6 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10"],"coveredBy":[],"location":{"end":{"column":13,"line":45},"start":{"column":3,"line":45}}},{"id":"7","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 4 tests\n{ seed: -252302003, path: \"3:0:0:0:0:0:1:1:1\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"ASSIMILATE\",\"payload\":[],\"correlationId\":undefined}]\nShrunk 8 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10"],"coveredBy":[],"location":{"end":{"column":15,"line":46},"start":{"column":3,"line":46}}},{"id":"8","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Property failed after 6 tests\n{ seed: -1698655496, path: \"5:0:0:0:0:0:0:1:1\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"NAVIGATE\",\"payload\":false,\"correlationId\":undefined}]\nShrunk 8 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10"],"coveredBy":[],"location":{"end":{"column":13,"line":47},"start":{"column":3,"line":47}}},{"id":"9","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"expected true to be false // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["19","20","21","23"],"coveredBy":[],"location":{"end":{"column":2,"line":66},"start":{"column":43,"line":54}}},{"id":"10","mutatorName":"MethodExpression","replacement":"z.number().min(0).min(7)","statusReason":"expected false to be true // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["5"],"coveredBy":[],"location":{"end":{"column":39,"line":57},"start":{"column":15,"line":57}}},{"id":"11","mutatorName":"MethodExpression","replacement":"z.number().max(0)","statusReason":"expected false to be true // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["20"],"coveredBy":[],"location":{"end":{"column":32,"line":57},"start":{"column":15,"line":57}}},{"id":"12","mutatorName":"MethodExpression","replacement":"z.number().min(0).min(7)","statusReason":"expected false to be true // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["20"],"coveredBy":[],"location":{"end":{"column":39,"line":58},"start":{"column":15,"line":58}}},{"id":"13","mutatorName":"MethodExpression","replacement":"z.number().max(0)","statusReason":"expected false to be true // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["5"],"coveredBy":[],"location":{"end":{"column":32,"line":58},"start":{"column":15,"line":58}}},{"id":"14","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"expected true to be false // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["21","23"],"coveredBy":[],"location":{"end":{"column":4,"line":65},"start":{"column":22,"line":61}}},{"id":"15","mutatorName":"ArrayDeclaration","replacement":"[]","statusReason":"expected false to be true // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["5"],"coveredBy":[],"location":{"end":{"column":59,"line":63},"start":{"column":22,"line":63}}},{"id":"16","mutatorName":"StringLiteral","replacement":"\"\"","status":"Survived","static":true,"testsCompleted":43,"coveredBy":[],"location":{"end":{"column":28,"line":63},"start":{"column":23,"line":63}}},{"id":"17","mutatorName":"StringLiteral","replacement":"\"\"","status":"Survived","static":true,"testsCompleted":43,"coveredBy":[],"location":{"end":{"column":38,"line":63},"start":{"column":30,"line":63}}},{"id":"18","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"expected false to be true // Object.is equality","status":"Killed","static":true,"testsCompleted":43,"killedBy":["5"],"coveredBy":[],"location":{"end":{"column":46,"line":63},"start":{"column":40,"line":63}}},{"id":"19","mutatorName":"StringLiteral","replacement":"\"\"","status":"Survived","static":true,"testsCompleted":43,"coveredBy":[],"location":{"end":{"column":58,"line":63},"start":{"column":48,"line":63}}},{"id":"20","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Property failed after 1 tests\n{ seed: -1020738922, path: \"0:0:0:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":8,\"eventType\":\"OBSERVE\",\"payload\":[]}]\nShrunk 8 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["11"],"coveredBy":[],"location":{"end":{"column":2,"line":79},"start":{"column":46,"line":72}}},{"id":"21","mutatorName":"MethodExpression","replacement":"z.number().min(0).min(7)","statusReason":"Property failed after 1 tests\n{ seed: -726812192, path: \"0:0:0:0:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":0,\"eventType\":\"OBSERVE\",\"payload\":{},\"correlationId\":undefined}]\nShrunk 9 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10","11","15","6"],"coveredBy":[],"location":{"end":{"column":39,"line":75},"start":{"column":15,"line":75}}},{"id":"22","mutatorName":"MethodExpression","replacement":"z.number().max(0)","statusReason":"Property failed after 1 tests\n{ seed: -1230394339, path: \"0:0:0:0:0:0:1:1:1:1\", endOnFailure: true }\nCounterexample: [{\"id\":\"00000000-0000-1000-8000-000000000000\",\"timestamp\":0,\"sourcePort\":1,\"eventType\":\"OBSERVE\",\"payload\":[],\"correlationId\":undefined}]\nShrunk 9 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run","status":"Killed","static":true,"testsCompleted":43,"killedBy":["10","15","6"],"coveredBy":[],"location":{"end":{"column":32,"line":75},"start":{"column":15,"line":75}}}],"source":"/**\r\n * P1 WEB WEAVER - Zod Contracts\r\n * \r\n * @port 1\r\n * @commander WEB_WEAVER\r\n * @verb BRIDGE / FUSE\r\n * @provenance: LEGENDARY_COMMANDERS_V9.md\r\n * Validates: Requirements 3.1, 3.2, 3.3, 3.4, 3.5, 3.6\r\n */\r\n\r\nimport { z } from 'zod';\r\nimport { \r\n  KiroEnvelopeSchema, \r\n  CloudEventSchema, \r\n  StigmergyHeadersSchema, \r\n  MCPContextSchema,\r\n  type KiroEnvelope,\r\n  type CloudEvent,\r\n  type StigmergyHeaders,\r\n  type MCPContext\r\n} from './kiro_spec.js';\r\n\r\nexport {\r\n  KiroEnvelopeSchema,\r\n  CloudEventSchema,\r\n  StigmergyHeadersSchema,\r\n  MCPContextSchema,\r\n};\r\n\r\nexport type {\r\n  KiroEnvelope,\r\n  CloudEvent,\r\n  StigmergyHeaders,\r\n  MCPContext,\r\n};\r\n\r\n// --- VERB ENUM ---\r\n\r\nexport const VerbSchema = z.enum([\r\n  'OBSERVE',    // P0: Lidless Legion\r\n  'BRIDGE',     // P1: Web Weaver\r\n  'SHAPE',      // P2: Mirror Magus\r\n  'INJECT',     // P3: Spore Storm\r\n  'DISRUPT',    // P4: Red Regnant\r\n  'IMMUNIZE',   // P5: Pyre Praetorian\r\n  'ASSIMILATE', // P6: Kraken Keeper\r\n  'NAVIGATE',   // P7: Spider Sovereign\r\n]);\r\n\r\nexport type Verb = z.infer<typeof VerbSchema>;\r\n\r\n// --- HFO ENVELOPE (Standard) ---\r\n\r\nexport const HfoEnvelopeSchema = z.object({\r\n  id: z.string().uuid(),\r\n  timestamp: z.number(),\r\n  sourcePort: z.number().min(0).max(7),\r\n  targetPort: z.number().min(0).max(7),\r\n  verb: VerbSchema,\r\n  payload: z.unknown(),\r\n  metadata: z.object({\r\n    ttl: z.number().default(60000),\r\n    priority: z.enum(['low', 'normal', 'high', 'critical']),\r\n    correlationId: z.string().optional(),\r\n  }),\r\n});\r\n\r\nexport type HfoEnvelope = z.infer<typeof HfoEnvelopeSchema>;\r\n\r\n// --- STIGMERGY EVENT ---\r\n\r\nexport const StigmergyEventSchema = z.object({\r\n  id: z.string().uuid(),\r\n  timestamp: z.number(),\r\n  sourcePort: z.number().min(0).max(7),\r\n  eventType: VerbSchema,\r\n  payload: z.unknown(),\r\n  correlationId: z.string().optional(),\r\n});\r\n\r\nexport type StigmergyEvent = z.infer<typeof StigmergyEventSchema>;\r\n\r\n// --- BRIDGE FUNCTION ---\r\n\r\n/**\r\n * Bridges a message by validating it against a schema\r\n * Polymorphic adapter pattern for protocol bridging\r\n */\r\nexport function bridge<T>(message: unknown, schema: z.ZodType<T>): { success: true; data: T } | { success: false; errors: string[] } {\r\n  const result = schema.safeParse(message);\r\n  if (result.success) {\r\n    return { success: true, data: result.data };\r\n  }\r\n  return {\r\n    success: false,\r\n    errors: result.error.errors.map(e => `${e.path.join('.')}: ${e.message}`),\r\n  };\r\n}\r\n\r\n// --- FUSE FUNCTION ---\r\n\r\n/**\r\n * Fuses two schemas into a combined schema (intersection)\r\n * Contract composition for complex message types\r\n */\r\nexport function fuse<A extends z.ZodRawShape, B extends z.ZodRawShape>(\r\n  schemaA: z.ZodObject<A>,\r\n  schemaB: z.ZodObject<B>\r\n): z.ZodObject<A & B> {\r\n  return schemaA.merge(schemaB) as z.ZodObject<A & B>;\r\n}\r\n\r\n// --- WRAP ENVELOPE ---\r\n\r\n/**\r\n * Wraps a payload in a HfoEnvelope\r\n */\r\nexport function wrapEnvelope(\r\n  sourcePort: number,\r\n  targetPort: number,\r\n  verb: Verb,\r\n  payload: unknown,\r\n  priority: 'low' | 'normal' | 'high' | 'critical' = 'normal'\r\n): HfoEnvelope {\r\n  return {\r\n    id: crypto.randomUUID(),\r\n    timestamp: Date.now(),\r\n    sourcePort,\r\n    targetPort,\r\n    verb,\r\n    payload,\r\n    metadata: {\r\n      ttl: 60000,\r\n      priority,\r\n    },\r\n  };\r\n}\r\n"}},"schemaVersion":"1.0","thresholds":{"high":80,"low":60,"break":null},"testFiles":{"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/WEB_WEAVER.test.ts":{"tests":[{"id":"0","name":"Commander P1: Web Weaver (WebWeaver) Verb: BRIDGE (Protocol Adaptation) Scenario: Validating a well-formed payload against a contract"},{"id":"1","name":"Commander P1: Web Weaver (WebWeaver) Verb: BRIDGE (Protocol Adaptation) Scenario: Validating a malformed payload against a contract"},{"id":"2","name":"Commander P1: Web Weaver (WebWeaver) Verb: FUSE (Schema Composition) Scenario: Merging two distinct identity contracts"},{"id":"3","name":"Commander P1: Web Weaver (WebWeaver) Verb: FUSE (Schema Composition) Scenario: Fused schema rejects partial matches"},{"id":"4","name":"Commander P1: Web Weaver (WebWeaver) Behavior: Message Wrapping & HfoEnvelope Scenario: Wrapping a payload with metadata"},{"id":"5","name":"Commander P1: Web Weaver (WebWeaver) Behavior: Message Wrapping & HfoEnvelope Scenario: Validating an HfoEnvelope border crossing"},{"id":"6","name":"Commander P1: Web Weaver (WebWeaver) Behavior: Stigmergy Event Logging Scenario: Validating a Stigmergy event for the Blackboard"}],"source":"/**\n * P1 WEB WEAVER - Unit Tests (BDD Style)\n * \n * @port 1\n * @commander WEB_WEAVER\n * @verb BRIDGE / FUSE\n * @provenance: LEGENDARY_COMMANDERS_V9.md\n * Validates: Requirements 3.4, 3.5, 3.6\n */\n\nimport { describe, it, expect } from 'vitest';\nimport { z } from 'zod';\nimport {\n  WebWeaver,\n  bridge,\n  fuse,\n  wrapEnvelope,\n  HfoEnvelopeSchema,\n  StigmergyEventSchema,\n} from './WEB_WEAVER.js';\n\ndescribe('Commander P1: Web Weaver (WebWeaver)', () => {\n  const weaver = new WebWeaver();\n\n  describe('Verb: BRIDGE (Protocol Adaptation)', () => {\n    it('Scenario: Validating a well-formed payload against a contract', () => {\n      // Given: A target contract for a person\n      const schema = z.object({ name: z.string(), age: z.number() });\n      \n      // When: A valid person object is bridged\n      const result = bridge({ name: 'test', age: 25 }, schema);\n      \n      // Then: The operation should succeed and return the parsed data\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data).toEqual({ name: 'test', age: 25 });\n      }\n    });\n\n    it('Scenario: Validating a malformed payload against a contract', () => {\n      // Given: A target contract for a person\n      const schema = z.object({ name: z.string(), age: z.number() });\n      \n      // When: An invalid person object (string instead of number) is bridged\n      const result = bridge({ name: 'test', age: 'wrong' }, schema);\n      \n      // Then: The operation should fail with error details\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.errors).toContain('age: Expected number, received string');\n      }\n    });\n  });\n\n  describe('Verb: FUSE (Schema Composition)', () => {\n    it('Scenario: Merging two distinct identity contracts', () => {\n      // Given: Two separate schemas\n      const schemaA = z.object({ name: z.string() });\n      const schemaB = z.object({ age: z.number() });\n      \n      // When: They are fused together\n      const fused = fuse(schemaA, schemaB);\n      \n      // Then: The resulting schema should require all fields from both parents\n      const result = fused.safeParse({ name: 'test', age: 25 });\n      expect(result.success).toBe(true);\n    });\n\n    it('Scenario: Fused schema rejects partial matches', () => {\n      // Given: Two separate schemas\n      const schemaA = z.object({ name: z.string() });\n      const schemaB = z.object({ age: z.number() });\n      \n      // When: They are fused together\n      const fused = fuse(schemaA, schemaB);\n      \n      // Then: A partial object (missing 'age') should fail validation\n      const result = fused.safeParse({ name: 'test' });\n      expect(result.success).toBe(false);\n    });\n  });\n\n  describe('Behavior: Message Wrapping & HfoEnvelope', () => {\n    it('Scenario: Wrapping a payload with metadata', () => {\n      // Given: A source, target, and payload\n      const source = 1;\n      const target = 7;\n      const payload = { data: 'interlock' };\n      \n      // When: The Web Weaver wraps the envelope\n      const envelope = wrapEnvelope(source, target, 'BRIDGE', payload);\n      \n      // Then: It should contain all necessary routing and priority metadata\n      expect(envelope.sourcePort).toBe( source );\n      expect(envelope.targetPort).toBe( target );\n      expect(envelope.verb).toBe('BRIDGE');\n      expect(envelope.payload).toEqual({ data: 'interlock' });\n      expect(envelope.metadata.priority).toBe('normal');\n    });\n\n    it('Scenario: Validating an HfoEnvelope border crossing', () => {\n      // Given: A raw object pretending to be an HfoEnvelope\n      const raw = {\n        id: crypto.randomUUID(),\n        timestamp: Date.now(),\n        sourcePort: 0,\n        targetPort: 7,\n        verb: 'OBSERVE',\n        payload: { query: 'test' },\n        metadata: {\n          ttl: 60000,\n          priority: 'high'\n        }\n      };\n      \n      // When: The Web Weaver validates the envelope at the border\n      const result = weaver.validateEnvelope(raw);\n      \n      // Then: The envelope should be accepted\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('Behavior: Stigmergy Event Logging', () => {\n    it('Scenario: Validating a Stigmergy event for the Blackboard', () => {\n      // Given: A valid event cross-linking PORT 1 and PORT 6\n      const event = {\n        id: crypto.randomUUID(),\n        timestamp: Date.now(),\n        sourcePort: 1,\n        eventType: 'BRIDGE',\n        payload: { action: 'adapt' }\n      };\n      \n      // When: The Web Weaver validates the event\n      const result = weaver.validateStigmergyEvent(event);\n      \n      // Then: The event should be compliant with the Stigmergy schema\n      expect(result.success).toBe(true);\n    });\n  });\n});\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/WEB_WEAVER.property.test.ts":{"tests":[{"id":"7","name":"Commander P1: Web Weaver (Property Tests) Verb: BRIDGE (Protocol adaptation invariants) Property: Every valid message must successfully cross the bridge"},{"id":"8","name":"Commander P1: Web Weaver (Property Tests) Verb: BRIDGE (Protocol adaptation invariants) Property: Messages that violate the contract must be rejected"},{"id":"9","name":"Commander P1: Web Weaver (Property Tests) Verb: FUSE (Schema composition invariants) Property: Fusing schemas preserves the union of requirements"},{"id":"10","name":"Commander P1: Web Weaver (Property Tests) Stigmergy: Event Validation Invariants Property: All HFO commander verbs are valid as Stigmergy event types"},{"id":"11","name":"Commander P1: Web Weaver (Property Tests) Stigmergy: Event Validation Invariants Property: Event source ports must be within the Commander 0-7 range"}],"source":"/**\n * P1 WEB WEAVER - Property-Based Tests (BDD Style)\n * \n * @port 1\n * @commander WEB_WEAVER\n * @verb BRIDGE / FUSE\n * Validates: Requirements 3.6\n */\n\nimport { describe, it, expect } from 'vitest';\nimport * as fc from 'fast-check';\nimport { z } from 'zod';\nimport {\n  bridge,\n  fuse,\n  wrapEnvelope,\n  HfoEnvelopeSchema,\n  StigmergyEventSchema,\n} from './contracts/index.js';\n\ndescribe('Commander P1: Web Weaver (Property Tests)', () => {\n\n  describe('Verb: BRIDGE (Protocol adaptation invariants)', () => {\n    it('Property: Every valid message must successfully cross the bridge', () => {\n      const schema = z.object({\n        name: fc.string({ minLength: 1 }),\n        value: fc.double({ noNaN: true }),\n      });\n\n      fc.assert(\n        fc.property(\n          fc.record({\n            name: fc.string({ minLength: 1 }),\n            value: fc.double({ noNaN: true }),\n          }),\n          (message) => {\n            const result = bridge(message, z.object({ name: z.string(), value: z.number() }));\n            expect(result.success).toBe(true);\n          }\n        ),\n        { numRuns: 100 }\n      );\n    });\n\n    it('Property: Messages that violate the contract must be rejected', () => {\n      const schema = z.object({\n        name: z.string(),\n        value: z.number(),\n      });\n\n      fc.assert(\n        fc.property(\n          fc.record({\n            name: fc.nat(), // Wrong type\n            value: fc.string(), // Wrong type\n          }),\n          (message) => {\n            const result = bridge(message, schema);\n            expect(result.success).toBe(false);\n          }\n        ),\n        { numRuns: 100 }\n      );\n    });\n  });\n\n  describe('Verb: FUSE (Schema composition invariants)', () => {\n    it('Property: Fusing schemas preserves the union of requirements', () => {\n      const schemaA = z.object({ a: z.string() });\n      const schemaB = z.object({ b: z.number() });\n      const fused = fuse(schemaA, schemaB);\n\n      fc.assert(\n        fc.property(\n          fc.record({\n            a: fc.string(),\n            b: fc.double({ noNaN: true }),\n          }),\n          (obj) => {\n            const result = fused.safeParse(obj);\n            expect(result.success).toBe(true);\n          }\n        ),\n        { numRuns: 100 }\n      );\n    });\n  });\n\n  describe('Stigmergy: Event Validation Invariants', () => {\n    const allVerbs = ['OBSERVE', 'BRIDGE', 'SHAPE', 'INJECT', 'DISRUPT', 'IMMUNIZE', 'ASSIMILATE', 'NAVIGATE'] as const;\n\n    it('Property: All HFO commander verbs are valid as Stigmergy event types', () => {\n      fc.assert(\n        fc.property(\n          fc.record({\n            id: fc.uuid(),\n            timestamp: fc.nat(),\n            sourcePort: fc.integer({ min: 0, max: 7 }),\n            eventType: fc.constantFrom(...allVerbs),\n            payload: fc.anything(),\n            correlationId: fc.option(fc.string(), { nil: undefined }),\n          }),\n          (event) => {\n            const result = StigmergyEventSchema.safeParse(event);\n            expect(result.success).toBe(true);\n          }\n        ),\n        { numRuns: 100 }\n      );\n    });\n\n    it('Property: Event source ports must be within the Commander 0-7 range', () => {\n      fc.assert(\n        fc.property(\n          fc.record({\n            id: fc.uuid(),\n            timestamp: fc.nat(),\n            sourcePort: fc.integer({ min: 8, max: 100 }), // Invalid range\n            eventType: fc.constantFrom(...allVerbs),\n            payload: fc.anything(),\n          }),\n          (event) => {\n            const result = StigmergyEventSchema.safeParse(event);\n            expect(result.success).toBe(false);\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n  });\n});\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/INTERLOCK.test.ts":{"tests":[{"id":"12","name":"P1 Web Weaver - Interlock Verification should standardize a raw payload into a Kiro-compliant envelope"},{"id":"13","name":"P1 Web Weaver - Interlock Verification should enforce interlock schemas during standardization"},{"id":"14","name":"P1 Web Weaver - Interlock Verification should fail standardization if stigmergy headers are missing"},{"id":"15","name":"P1 Web Weaver - Interlock Verification should validate a stigmergy event"},{"id":"16","name":"P1 Web Weaver - Interlock Verification should fuse schemas and bridge data"},{"id":"17","name":"P1 Web Weaver - Interlock Verification should support CloudEvents 1.0 integration"},{"id":"18","name":"P1 Web Weaver - Interlock Verification should support MCP context integration"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { z } from 'zod';\r\nimport { WebWeaver } from './WEB_WEAVER.js';\r\nimport { KiroEnvelopeSchema } from './contracts/index.js';\r\n\r\ndescribe('P1 Web Weaver - Interlock Verification', () => {\r\n  const weaver = new WebWeaver();\r\n\r\n  it('should standardize a raw payload into a Kiro-compliant envelope', () => {\r\n    const payload = { action: 'test-action', data: [1, 2, 3] };\r\n    const stigmergy = {\r\n      origin_id: crypto.randomUUID(),\r\n      entropy_score: 0.5,\r\n      hive_phase: 'I',\r\n      commander_id: 'TEST_COMMANDER'\r\n    };\r\n\r\n    const envelope = weaver.standardize(payload, stigmergy as any);\r\n\r\n    expect(envelope.version).toBe('kiro.1');\r\n    expect(envelope.payload).toEqual(payload);\r\n    expect(envelope.stigmergy.commander_id).toBe('TEST_COMMANDER');\r\n    expect(KiroEnvelopeSchema.safeParse(envelope).success).toBe(true);\r\n  });\r\n\r\n  it('should enforce interlock schemas during standardization', () => {\r\n    const payload = { count: 10 };\r\n    const schema = z.object({ count: z.number().max(5) }); // Will fail\r\n    const stigmergy = {\r\n      origin_id: crypto.randomUUID(),\r\n      entropy_score: 0.1,\r\n      hive_phase: 'I',\r\n      commander_id: 'TEST'\r\n    };\r\n\r\n    expect(() => weaver.standardize(payload, stigmergy as any, { payloadSchema: schema }))\r\n      .toThrow(/Interlock Validation Failed/);\r\n  });\r\n\r\n  it('should fail standardization if stigmergy headers are missing', () => {\r\n    const payload = { foo: 'bar' };\r\n    const invalidStigmergy = { origin_id: 'not-a-uuid' };\r\n\r\n    expect(() => weaver.standardize(payload, invalidStigmergy as any))\r\n      .toThrow(/Kiro Spec Violation/);\r\n  });\r\n\r\n  it('should validate a stigmergy event', () => {\r\n    const event = {\r\n      id: crypto.randomUUID(),\r\n      timestamp: Date.now(),\r\n      sourcePort: 1,\r\n      eventType: 'BRIDGE',\r\n      payload: { status: 'ok' }\r\n    };\r\n\r\n    const result = weaver.validateStigmergyEvent(event);\r\n    expect(result.success).toBe(true);\r\n  });\r\n\r\n  it('should fuse schemas and bridge data', () => {\r\n    const schemaA = z.object({ a: z.string() });\r\n    const schemaB = z.object({ b: z.number() });\r\n    const fused = weaver.fuse(schemaA, schemaB);\r\n    \r\n    const data = { a: 'hello', b: 42 };\r\n    const result = weaver.bridge(data, fused);\r\n    expect(result.success).toBe(true);\r\n  });\r\n\r\n  it('should support CloudEvents 1.0 integration', () => {\r\n    const payload = { user: 'alice' };\r\n    const stigmergy = {\r\n      origin_id: crypto.randomUUID(),\r\n      entropy_score: 0.1,\r\n      hive_phase: 'V',\r\n      commander_id: 'WEB_WEAVER'\r\n    };\r\n    const cloudEvent = {\r\n      specversion: '1.0',\r\n      type: 'user.created',\r\n      source: '/api/users',\r\n      id: 'evt-123'\r\n    };\r\n\r\n    const envelope = weaver.standardize(payload, stigmergy as any, { cloudEvent });\r\n\r\n    expect(envelope.cloud_event?.type).toBe('user.created');\r\n    expect(envelope.cloud_event?.specversion).toBe('1.0');\r\n  });\r\n\r\n  it('should support MCP context integration', () => {\r\n    const payload = { tool: 'search' };\r\n    const stigmergy = {\r\n      origin_id: crypto.randomUUID(),\r\n      entropy_score: 0.1,\r\n      hive_phase: 'H',\r\n      commander_id: 'SPIDER_SOVEREIGN'\r\n    };\r\n    const mcpContext = {\r\n      mcp_version: '1.0.0',\r\n      capabilities: {},\r\n      client: { name: 'copilot', version: '1.0' }\r\n    };\r\n\r\n    const envelope = weaver.standardize(payload, stigmergy as any, { mcpContext });\r\n\r\n    expect(envelope.mcp_context?.client.name).toBe('copilot');\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/contracts/CONTRACT_HARDENING.test.ts":{"tests":[{"id":"19","name":"P1 CONTRACT HARDENING - Mutant Kills should kill Mutation: HfoEnvelopeSchema ObjectLiteral to {}"},{"id":"20","name":"P1 CONTRACT HARDENING - Mutant Kills should kill Mutation: min(0) to max(0) or similar for ports"},{"id":"21","name":"P1 CONTRACT HARDENING - Mutant Kills should kill Mutation: Enum values for priority"},{"id":"22","name":"P1 CONTRACT HARDENING - Mutant Kills should kill Mutation: Error path join(\".\") in bridge function"},{"id":"23","name":"P1 CONTRACT HARDENING - Mutant Kills should verify metadata required fields to kill ObjectLiteral mutation"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { HfoEnvelopeSchema, bridge } from './index.ts';\r\nimport { z } from 'zod';\r\n\r\ndescribe('P1 CONTRACT HARDENING - Mutant Kills', () => {\r\n  it('should kill Mutation: HfoEnvelopeSchema ObjectLiteral to {}', () => {\r\n    const result = HfoEnvelopeSchema.safeParse({});\r\n    expect(result.success).toBe(false);\r\n    if (!result.success) {\r\n      // Must check for specific missing fields to ensure the schema isn't an empty object\r\n      const errorPaths = result.error.errors.map(e => e.path[0]);\r\n      expect(errorPaths).toContain('id');\r\n      expect(errorPaths).toContain('timestamp');\r\n      expect(errorPaths).toContain('sourcePort');\r\n      expect(errorPaths).toContain('verb');\r\n    }\r\n  });\r\n\r\n  it('should kill Mutation: min(0) to max(0) or similar for ports', () => {\r\n    const invalidPort = {\r\n      id: '00000000-0000-0000-0000-000000000000',\r\n      timestamp: Date.now(),\r\n      sourcePort: -1,\r\n      targetPort: 8,\r\n      verb: 'BRIDGE',\r\n      payload: {},\r\n      metadata: { priority: 'normal' }\r\n    };\r\n    const result = HfoEnvelopeSchema.safeParse(invalidPort);\r\n    expect(result.success).toBe(false);\r\n    if (!result.success) {\r\n      expect(result.error.errors.some(e => e.path.includes('sourcePort'))).toBe(true);\r\n      expect(result.error.errors.some(e => e.path.includes('targetPort'))).toBe(true);\r\n    }\r\n  });\r\n\r\n  it('should kill Mutation: Enum values for priority', () => {\r\n    const invalidPriority = {\r\n      id: '00000000-0000-0000-0000-000000000000',\r\n      timestamp: Date.now(),\r\n      sourcePort: 1,\r\n      targetPort: 2,\r\n      verb: 'BRIDGE',\r\n      payload: {},\r\n      metadata: { priority: 'ULTRA_HIGH' }\r\n    };\r\n    const result = HfoEnvelopeSchema.safeParse(invalidPriority);\r\n    expect(result.success).toBe(false);\r\n    if (!result.success) {\r\n      expect(result.error.errors.some(e => e.path.includes('priority'))).toBe(true);\r\n    }\r\n  });\r\n\r\n  it('should kill Mutation: Error path join(\".\") in bridge function', () => {\r\n    const invalidNested = {\r\n       metadata: { priority: 123 } // Invalid type, invalid enum\r\n    };\r\n    \r\n    // We use a custom schema to test bridge's error formatting\r\n    const schema = z.object({\r\n       deep: z.object({\r\n          field: z.string()\r\n       })\r\n    });\r\n    \r\n    const result = bridge({ deep: { field: 123 } }, schema);\r\n    expect(result.success).toBe(false);\r\n    if (!result.success) {\r\n      // If .join('.') was mutated to .join(''), this will fail\r\n      expect(result.errors[0]).toContain('deep.field');\r\n    }\r\n  });\r\n\r\n  it('should verify metadata required fields to kill ObjectLiteral mutation', () => {\r\n    const invalidMetadata = {\r\n      id: '00000000-0000-0000-0000-000000000000',\r\n      timestamp: Date.now(),\r\n      sourcePort: 1,\r\n      targetPort: 2,\r\n      verb: 'BRIDGE',\r\n      payload: {},\r\n      metadata: {} // Missing priority\r\n    };\r\n    const result = HfoEnvelopeSchema.safeParse(invalidMetadata);\r\n    expect(result.success).toBe(false);\r\n    if (!result.success) {\r\n      expect(result.error.errors.some(e => e.path.includes('priority'))).toBe(true);\r\n    }\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/contracts/STIGMERGY_INTERLOCK.test.ts":{"tests":[{"id":"24","name":"P1 WEB WEAVER - Stigmergy Interlock validates a minimum viable pheromone mark"},{"id":"25","name":"P1 WEB WEAVER - Stigmergy Interlock rejects a mark without a hive phase"},{"id":"26","name":"P1 WEB WEAVER - Stigmergy Interlock standardizes a full Kiro envelope for cross-port passage"}],"source":"/**\r\n * @port 1\r\n * @commander WEB_WEAVER\r\n * @gen 88\r\n * @status BRONZE\r\n * @provenance LEGENDARY_COMMANDERS_V9.md\r\n * @verb FUSE\r\n * Purpose: Integration test for Pheromone Stigmergy Standard (Kiro v1).\r\n */\r\n\r\nimport { describe, it, expect } from 'vitest';\r\nimport { KiroEnvelopeSchema, StigmergyHeadersSchema } from './kiro_spec';\r\n\r\ndescribe('P1 WEB WEAVER - Stigmergy Interlock', () => {\r\n  it('validates a minimum viable pheromone mark', () => {\r\n    const validHeader = {\r\n      origin_id: crypto.randomUUID(),\r\n      entropy_score: 0.1,\r\n      hive_phase: 'H',\r\n      commander_id: 'LIDLESS_LEGION'\r\n    };\r\n    \r\n    const result = StigmergyHeadersSchema.safeParse(validHeader);\r\n    expect(result.success).toBe(true);\r\n  });\r\n\r\n  it('rejects a mark without a hive phase', () => {\r\n    const invalidHeader = {\r\n      origin_id: crypto.randomUUID(),\r\n      entropy_score: 0.5,\r\n      commander_id: 'SPORE_STORM'\r\n    };\r\n    \r\n    //@ts-ignore\r\n    const result = StigmergyHeadersSchema.safeParse(invalidHeader);\r\n    expect(result.success).toBe(false);\r\n  });\r\n\r\n  it('standardizes a full Kiro envelope for cross-port passage', () => {\r\n    const fullEnvelope = {\r\n      version: 'kiro.1',\r\n      envelope_id: crypto.randomUUID(),\r\n      timestamp: Date.now(),\r\n      stigmergy: {\r\n        origin_id: crypto.randomUUID(),\r\n        entropy_score: 0.88,\r\n        hive_phase: 'E',\r\n        commander_id: 'SPIDER_SOVEREIGN'\r\n      },\r\n      payload: {\r\n        msg: \"Mission complete. Promote to Silver.\",\r\n        target_medallion: \"SILVER\"\r\n      }\r\n    };\r\n\r\n    const result = KiroEnvelopeSchema.safeParse(fullEnvelope);\r\n    if (!result.success) {\r\n      console.error(result.error);\r\n    }\r\n    expect(result.success).toBe(true);\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/envelope-wrapper.test.ts":{"tests":[{"id":"27","name":"P1_WEB_WEAVER Sub 2: Envelope Wrapper should wrap payload in a valid KiroEnvelope"},{"id":"28","name":"P1_WEB_WEAVER Sub 2: Envelope Wrapper should throw on invalid headers"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { EnvelopeWrapper } from './envelope-wrapper';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 2: Envelope Wrapper', () => {\r\n  const wrapper = new EnvelopeWrapper();\r\n\r\n  it('should wrap payload in a valid KiroEnvelope', () => {\r\n    const payload = { data: 'test' };\r\n    const headers = { source_port: 0, target_port: 1, verb: 'SENSE' };\r\n    const envelope = wrapper.wrap(payload, headers);\r\n\r\n    expect(envelope.version).toBe('kiro.1.0');\r\n    expect(envelope.envelope_id).toBeDefined();\r\n    expect(envelope.timestamp).toBeLessThanOrEqual(Date.now());\r\n    expect(envelope.stigmergy.verb).toBe('SENSE');\r\n    expect(envelope.payload).toEqual(payload);\r\n  });\r\n\r\n  it('should throw on invalid headers', () => {\r\n    expect(() => wrapper.wrap({}, { source_port: 'invalid' } as any)).toThrow();\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/schema-fusion.test.ts":{"tests":[{"id":"29","name":"P1_WEB_WEAVER Sub 1: Schema Fusion should merge two object schemas"},{"id":"30","name":"P1_WEB_WEAVER Sub 1: Schema Fusion should create an intersection lattice"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { SchemaFusion } from './schema-fusion';\r\nimport { z } from 'zod';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 1: Schema Fusion', () => {\r\n  const fusion = new SchemaFusion();\r\n\r\n  it('should merge two object schemas', () => {\r\n    const s1 = z.object({ a: z.string() });\r\n    const s2 = z.object({ b: z.number() });\r\n    const fused = fusion.fuse(s1, s2);\r\n    \r\n    expect(fused.parse({ a: 'hi', b: 1 })).toEqual({ a: 'hi', b: 1 });\r\n  });\r\n\r\n  it('should create an intersection lattice', () => {\r\n    const s1 = z.object({ a: z.string() });\r\n    const s2 = z.object({ a: z.literal('target') });\r\n    const lat = fusion.lattice([s1, s2]);\r\n\r\n    expect(lat.parse({ a: 'target' })).toEqual({ a: 'target' });\r\n    expect(() => lat.parse({ a: 'wrong' })).toThrow();\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/api-gateway.test.ts":{"tests":[{"id":"31","name":"P1_WEB_WEAVER Sub 7: API Gateway should route request to registered handler"},{"id":"32","name":"P1_WEB_WEAVER Sub 7: API Gateway should return failure for unknown port"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { ApiGateway } from './api-gateway';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 7: API Gateway', () => {\r\n  const gateway = new ApiGateway();\r\n\r\n  it('should route request to registered handler', () => {\r\n    gateway.addRoute(0, (req) => ({ status: 'SUCCESS', data: { echo: req.payload } }));\r\n    \r\n    const resp = gateway.handle({ port: 0, verb: 'SENSE', payload: 'hello' });\r\n    expect(resp.status).toBe('SUCCESS');\r\n    expect(resp.data.echo).toBe('hello');\r\n  });\r\n\r\n  it('should return failure for unknown port', () => {\r\n    const resp = gateway.handle({ port: 99, verb: 'VOOR', payload: {} });\r\n    expect(resp.status).toBe('FAILURE');\r\n    expect(resp.error).toContain('No handler registered');\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/module-registry.test.ts":{"tests":[{"id":"33","name":"P1_WEB_WEAVER Sub 3: Module Registry should register and retrieve modules"},{"id":"34","name":"P1_WEB_WEAVER Sub 3: Module Registry should throw on duplicate ports"},{"id":"35","name":"P1_WEB_WEAVER Sub 3: Module Registry should list registered ports"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { ModuleRegistry } from './module-registry';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 3: Module Registry', () => {\r\n  const registry = new ModuleRegistry();\r\n\r\n  it('should register and retrieve modules', () => {\r\n    const mod = { port: 4, commander: 'Red Regnant', entry: './P4.ts' };\r\n    registry.register(mod);\r\n    expect(registry.getModule(4)).toEqual(mod);\r\n  });\r\n\r\n  it('should throw on duplicate ports', () => {\r\n    const mod = { port: 4, commander: 'Another', entry: './A.ts' };\r\n    expect(() => registry.register(mod)).toThrow(/already registered/);\r\n  });\r\n\r\n  it('should list registered ports', () => {\r\n    expect(registry.listPorts()).toContain(4);\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/protocol-bridge.test.ts":{"tests":[{"id":"36","name":"P1_WEB_WEAVER Sub 0: Protocol Bridge should pass valid data through the bridge"},{"id":"37","name":"P1_WEB_WEAVER Sub 0: Protocol Bridge should throw error on invalid data"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { ProtocolBridge } from './protocol-bridge';\r\nimport { z } from 'zod';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 0: Protocol Bridge', () => {\r\n  const bridge = new ProtocolBridge();\r\n  const schema = z.object({ id: z.string(), val: z.number() });\r\n\r\n  it('should pass valid data through the bridge', () => {\r\n    const data = { id: 'test', val: 123 };\r\n    const result = bridge.bridge(data, schema);\r\n    expect(result).toEqual(data);\r\n  });\r\n\r\n  it('should throw error on invalid data', () => {\r\n    const data = { id: 'test', val: 'not-a-number' };\r\n    expect(() => bridge.bridge(data, schema)).toThrow(/Bridge Validation Failed/);\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/contract-store.test.ts":{"tests":[{"id":"38","name":"P1_WEB_WEAVER Sub 4: Contract Store should register and validate against contracts"},{"id":"39","name":"P1_WEB_WEAVER Sub 4: Contract Store should throw for unknown contracts"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { ContractStore } from './contract-store';\r\nimport { z } from 'zod';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 4: Contract Store', () => {\r\n  const store = new ContractStore();\r\n  const UserSchema = z.object({ name: z.string() });\r\n\r\n  it('should register and validate against contracts', () => {\r\n    store.register('User', UserSchema);\r\n    const valid = { name: 'Alice' };\r\n    expect(store.validate('User', valid)).toEqual(valid);\r\n  });\r\n\r\n  it('should throw for unknown contracts', () => {\r\n    expect(() => store.get('Unknown')).toThrow(/not found/);\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/event-bus.test.ts":{"tests":[{"id":"40","name":"P1_WEB_WEAVER Sub 5: Event Bus should publish and subscribe to events"},{"id":"41","name":"P1_WEB_WEAVER Sub 5: Event Bus should handle events with no subscribers gracefully"}],"source":"import { describe, it, expect, vi } from 'vitest';\r\nimport { EventBus } from './event-bus';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 5: Event Bus', () => {\r\n  it('should publish and subscribe to events', () => {\r\n    const bus = new EventBus();\r\n    const handler = vi.fn();\r\n    \r\n    bus.subscribe('SENSE_PEAK', handler);\r\n    bus.publish('SENSE_PEAK', { val: 100 });\r\n    \r\n    expect(handler).toHaveBeenCalledWith({ val: 100 });\r\n  });\r\n\r\n  it('should handle events with no subscribers gracefully', () => {\r\n    const bus = new EventBus();\r\n    expect(() => bus.publish('UNKNOWN', {})).not.toThrow();\r\n  });\r\n});\r\n"},"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/core/flow-pipe.test.ts":{"tests":[{"id":"42","name":"P1_WEB_WEAVER Sub 6: Flow Pipe should chain operations in sequence"}],"source":"import { describe, it, expect } from 'vitest';\r\nimport { FlowPipe } from './flow-pipe';\r\n\r\ndescribe('P1_WEB_WEAVER Sub 6: Flow Pipe', () => {\r\n  it('should chain operations in sequence', () => {\r\n    const result = FlowPipe.start(10)\r\n      .pipe(n => n * 2)\r\n      .pipe(n => n + 5)\r\n      .pipe(n => `Result: ${n}`)\r\n      .execute();\r\n\r\n    expect(result).toBe('Result: 25');\r\n  });\r\n});\r\n"}},"projectRoot":"C:\\Dev\\active\\hfo_gen88","config":{"packageManager":"npm","reporters":["clear-text","progress","json"],"testRunner":"vitest","coverageAnalysis":"perTest","mutate":["hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/contracts/index.ts"],"ignorePatterns":["cold_obsidian_sandbox/**","**/4_archive/**","**/quarantine/**","**/hfo_ports/P0_**","**/hfo_ports/P2_**","**/hfo_ports/P3_**","**/hfo_ports/P4_**","**/hfo_ports/P5_**","**/hfo_ports/P6_**","**/hfo_ports/P7_**",".git/**","**/.venv/**","node_modules/**","**/.stryker-tmp*/**"],"vitest":{"configFile":"vitest.p1.mutation.config.ts"},"tempDirName":".stryker-tmp-p1","cleanTempDir":"always","timeoutMS":5000,"timeoutFactor":1.5,"concurrency":2,"maxTestRunnerReuse":10,"disableBail":true,"jsonReporter":{"fileName":"hot_obsidian_sandbox/bronze/2_areas/hfo_ports/P1_WEB_WEAVER/mutation-report.json"},"configFile":"hot_obsidian_sandbox/bronze/1_projects/infra/stryker/stryker.p1.config.mjs","allowConsoleColors":true,"checkers":[],"checkerNodeArgs":[],"commandRunner":{"command":"npm test"},"clearTextReporter":{"allowColor":true,"allowEmojis":false,"logTests":true,"maxTestsToLog":3,"reportTests":true,"reportMutants":true,"reportScoreTable":true,"skipFull":false},"dashboard":{"baseUrl":"https://dashboard.stryker-mutator.io/api/reports","reportType":"full"},"dryRunOnly":false,"eventReporter":{"baseDir":"reports/mutation/events"},"ignoreStatic":false,"incremental":false,"incrementalFile":"reports/stryker-incremental.json","force":false,"fileLogLevel":"off","inPlace":false,"logLevel":"info","maxConcurrentTestRunners":9007199254740991,"mutator":{"plugins":null,"excludedMutations":[]},"plugins":["@stryker-mutator/*"],"appendPlugins":[],"htmlReporter":{"fileName":"reports/mutation/mutation.html"},"disableTypeChecks":true,"symlinkNodeModules":true,"testRunnerNodeArgs":[],"thresholds":{"high":80,"low":60,"break":null},"dryRunTimeoutMinutes":5,"tsconfigFile":"tsconfig.json","warnings":true,"allowEmpty":false,"ignorers":[],"typescriptChecker":{"prioritizePerformanceOverAccuracy":true}},"framework":{"name":"StrykerJS","version":"8.7.1","branding":{"homepageUrl":"https://stryker-mutator.io","imageUrl":"data:image/svg+xml;utf8,%3Csvg viewBox='0 0 1458 1458' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='2'%3E%3Cpath fill='none' d='M0 0h1458v1458H0z'/%3E%3CclipPath id='a'%3E%3Cpath d='M0 0h1458v1458H0z'/%3E%3C/clipPath%3E%3Cg clip-path='url(%23a)'%3E%3Cpath d='M1458 729c0 402.655-326.345 729-729 729S0 1131.655 0 729C0 326.445 326.345 0 729 0s729 326.345 729 729' fill='%23e74c3c' fill-rule='nonzero'/%3E%3Cpath d='M778.349 1456.15L576.6 1254.401l233-105 85-78.668v-64.332l-257-257-44-187-50-208 251.806-82.793L1076.6 389.401l380.14 379.15c-19.681 367.728-311.914 663.049-678.391 687.599z' fill-opacity='.3'/%3E%3Cpath d='M753.4 329.503c41.79 0 74.579 7.83 97.925 25.444 23.571 18.015 41.69 43.956 55.167 77.097l11.662 28.679 165.733-58.183-14.137-32.13c-26.688-60.655-64.896-108.61-114.191-144.011-49.329-35.423-117.458-54.302-204.859-54.302-50.78 0-95.646 7.376-134.767 21.542-40.093 14.671-74.09 34.79-102.239 60.259-28.84 26.207-50.646 57.06-65.496 92.701-14.718 35.052-22.101 72.538-22.101 112.401 0 72.536 20.667 133.294 61.165 182.704 38.624 47.255 98.346 88.037 179.861 121.291 42.257 17.475 78.715 33.125 109.227 46.994 27.193 12.361 49.294 26.124 66.157 41.751 15.309 14.186 26.497 30.584 33.63 49.258 7.721 20.214 11.16 45.69 11.16 76.402 0 28.021-4.251 51.787-13.591 71.219-8.832 18.374-20.171 33.178-34.523 44.219-14.787 11.374-31.193 19.591-49.393 24.466-19.68 5.359-39.14 7.993-58.69 7.993-29.359 0-54.387-3.407-75.182-10.747-20.112-7.013-37.144-16.144-51.259-27.486-13.618-11.009-24.971-23.766-33.744-38.279-9.64-15.8-17.272-31.924-23.032-48.408l-10.965-31.376-161.669 60.585 10.734 30.124c10.191 28.601 24.197 56.228 42.059 82.748 18.208 27.144 41.322 51.369 69.525 72.745 27.695 21.075 60.904 38.218 99.481 51.041 37.777 12.664 82.004 19.159 132.552 19.159 49.998 0 95.818-8.321 137.611-24.622 42.228-16.471 78.436-38.992 108.835-67.291 30.719-28.597 54.631-62.103 71.834-100.642 17.263-38.56 25.923-79.392 25.923-122.248 0-54.339-8.368-100.37-24.208-138.32-16.29-38.759-38.252-71.661-65.948-98.797-26.965-26.418-58.269-48.835-93.858-67.175-33.655-17.241-69.196-33.11-106.593-47.533-35.934-13.429-65.822-26.601-89.948-39.525-22.153-11.868-40.009-24.21-53.547-37.309-11.429-11.13-19.83-23.678-24.718-37.664-5.413-15.49-7.98-33.423-7.98-53.577 0-40.883 11.293-71.522 37.086-90.539 28.443-20.825 64.985-30.658 109.311-30.658z' fill='%23f1c40f' fill-rule='nonzero'/%3E%3Cpath d='M720 0h18v113h-18zM1458 738v-18h-113v18h113zM720 1345h18v113h-18zM113 738v-18H0v18h113z'/%3E%3C/g%3E%3C/svg%3E"},"dependencies":{"@stryker-mutator/typescript-checker":"8.7.1","typescript":"5.9.3","webpack":"5.104.1"}}}