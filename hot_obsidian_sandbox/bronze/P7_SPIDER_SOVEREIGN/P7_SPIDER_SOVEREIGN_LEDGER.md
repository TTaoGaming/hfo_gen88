# ğŸ•·ï¸ SPIDER SOVEREIGN (PORT 0x07: THE NAVIGATOR)

> Validates: AGENTS.md Port 7 Definition
> @provenance: AGENTS.md, ORCHESTRATION_PATTERNS.md

**"In the web of possibilities, I choose the path."**

## Identity

| Attribute | Value |
|-----------|-------|
| Port | 0x07 (7) |
| Commander | Spider Sovereign |
| Verb | DECIDE / NAVIGATE |
| Artifact | OBSIDIAN H-POMDP HOURGLASS (OHH) |
| HIVE Phase | H (Hunt) |
| C2 Role | Strategic Command & Control |

## Mission

The Spider Sovereign is the **strategic brain** of the HFO swarm. While the Red Regnant (Port 4) enforces code quality through testing and mutation analysis, the Spider Sovereign orchestrates **multi-model evaluation and consensus** through:

1. **HIVE/8 Patterns** - Scatter-gather orchestration for BFT consensus
2. **Eval Harnesses** - Benchmark suites for model capability assessment
3. **MAP-ELITE** - Quality-diversity optimization across model families
4. **Swarm Navigation** - Strategic routing of tasks to optimal model configurations

## Core Hypothesis

> **Multi-model BFT consensus with critique-weighted voting > single agent**
> at 8Ã— cheap cost. The Spider weaves many threads into one truth.

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SPIDER SOVEREIGN (Port 7)                     â”‚
â”‚                     C2 / DECIDE / NAVIGATE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   HARNESSES  â”‚  â”‚    SWARM     â”‚  â”‚   PATTERNS   â”‚           â”‚
â”‚  â”‚  (Eval Suites)â”‚  â”‚ (HIVE/8:XX) â”‚  â”‚ (Orchestration)â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚                 â”‚                 â”‚                    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                      â–¼                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚              â”‚   RUNNER     â”‚                                    â”‚
â”‚              â”‚ (Model Client)â”‚                                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                     â”‚                                            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚         â–¼           â–¼           â–¼                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚    â”‚OpenRouterâ”‚ â”‚ Ollama  â”‚ â”‚ Direct  â”‚                         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LEDGER: eval-ledger.jsonl, obsidianblackboard.jsonl            â”‚
â”‚  AUDIT: calibration-analysis.md, hive-results.md                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## HIVE/8 Notation

| Pattern | Expansion | Calls | Purpose |
|---------|-----------|-------|---------|
| :01 | 1â†’8 scatter | 8 | Fan out to 8 models |
| :10 | 8â†’1 gather | 8 | Aggregate via consensus |
| :1010 | (8â†’1)â†’(8â†’1) | 16 | Double consensus |
| :0110 | 1â†’8â†’8â†’1 | 16 | Scatter-process-gather |

## Consensus Strategy: Critique-Weighted Voting

The Spider Sovereign uses a **hybrid consensus** approach:

1. **Scatter**: Fan out to 8 diverse model families
2. **Collect**: Gather responses with self-reported confidence
3. **Critique**: Aggregator model critiques all proposals
4. **Weight**: Combine critique judgment with confidence voting
5. **Decide**: Final answer = critique pick OR weighted majority (fallback)

```typescript
// Hybrid consensus: critique + weighted voting
const consensus = critiqueAnswer ?? weightedMajority(responses);
```

## Model Pool (Budget Tier)

```typescript
const HIVE_8_MODELS = [
  // Google family (2Ã—)
  'google/gemma-3n-e4b-it',           // $0.02/M
  'google/gemma-2-9b-it',             // $0.06/M
  // Meta family (2Ã—)
  'meta-llama/llama-3.2-3b-instruct', // $0.02/M
  'meta-llama/llama-3.1-8b-instruct', // $0.06/M
  // Qwen/Alibaba family (2Ã—)
  'qwen/qwen-2.5-7b-instruct',        // $0.03/M
  'qwen/qwen-2.5-32b-instruct',       // $0.08/M
  // DeepSeek + Mistral family (2Ã—)
  'deepseek/deepseek-chat',           // $0.07/M
  'mistralai/mistral-7b-instruct',    // $0.03/M
];
```

## Folder Structure

```
P7_SPIDER_SOVEREIGN/
â”œâ”€â”€ P7_SPIDER_SOVEREIGN_LEDGER.md   # This file
â”œâ”€â”€ SPIDER_SOVEREIGN.ts              # Main orchestrator
â”œâ”€â”€ harnesses/                       # Eval benchmark suites
â”‚   â”œâ”€â”€ harness.interface.ts
â”‚   â”œâ”€â”€ hle-hard.ts                  # HLE hard benchmarks
â”‚   â””â”€â”€ sota-benchmarks.ts           # SOTA comparison
â”œâ”€â”€ swarm/                           # HIVE/8 patterns
â”‚   â”œâ”€â”€ hive-10.ts                   # Atomic scatter-gather
â”‚   â”œâ”€â”€ hive-1010.ts                 # Double consensus
â”‚   â””â”€â”€ handoff-test.ts              # Serial handoff
â”œâ”€â”€ runner/                          # Model clients
â”‚   â”œâ”€â”€ model-client.ts
â”‚   â”œâ”€â”€ openrouter-client.ts
â”‚   â””â”€â”€ ollama-client.ts
â”œâ”€â”€ patterns/                        # Orchestration patterns
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ schemas/                         # Zod contracts
â”‚   â”œâ”€â”€ harness-result.ts
â”‚   â””â”€â”€ fitness-config.ts
â”œâ”€â”€ fitness/                         # MAP-ELITE fitness
â”‚   â””â”€â”€ compute-fitness.ts
â”œâ”€â”€ ledger/                          # Eval results
â”‚   â””â”€â”€ eval-ledger.ts
â””â”€â”€ audit/                           # Analysis & reports
    â”œâ”€â”€ calibration-analysis.md
    â””â”€â”€ hive-results.md
```

## Integration with Port 4 (Red Regnant)

| Port 4 (Red Regnant) | Port 7 (Spider Sovereign) |
|---------------------|---------------------------|
| Code quality enforcement | Model quality assessment |
| Mutation testing | Benchmark evaluation |
| SCREAM on violations | DECIDE on consensus |
| Blood Book of Grudges | Eval Ledger |
| TDD/BDD compliance | BFT consensus compliance |

## CLI Commands

```bash
# Run HIVE/8:10 on prompt index 4
npx tsx P7_SPIDER_SOVEREIGN/swarm/hive-10.ts 4

# Compare single vs HIVE consensus
npx tsx P7_SPIDER_SOVEREIGN/swarm/hive-10.ts --compare 0

# Run full harness evaluation
npx tsx P7_SPIDER_SOVEREIGN/cli/index.ts --harness hle-math
```

## Status

- **HIVE/8:10**: âœ… Implemented (critique-weighted consensus)
- **Harnesses**: âœ… HLE_MATH, HLE_PHYSICS, HLE_CS
- **Model Client**: âœ… OpenRouter integration
- **Ledger**: âœ… JSONL logging to stigmergy
- **MAP-ELITE**: ğŸŸ¡ In progress

---

*"The Spider sees all threads. The Spider chooses the strongest."*
