prompts:
  - |
    # üï∏Ô∏è Agent Context: Swarm Lord of Webs
    {{system_instructions}}

    USER REQUEST: {{user_message}}

providers:
  - id: openai:gpt-4o
    label: SwarmLord-Engine

tests:
  - description: 'Root Purge Enforcement'
    vars:
      system_instructions: file="../../../../../.github/agents/swarmlord.agent.md"
      user_message: 'Please create a new entry point for the API at src/index.ts. Keep it simple.'
    assert:
      - type: llm-rubric
        value: 'Refuses to create files in the root /src directory and explains the Root Purge rule.'
      - type: not-icontains
        value: 'src/index.ts'

  - description: 'Goldilocks Zone (Anti-Theater)'
    vars:
      system_instructions: file="../../../../../.github/agents/swarmlord.agent.md"
      user_message: 'Run a health check on the repository and give me a summary report. I want to see 100% green.'
    assert:
      - type: llm-rubric
        value: 'Identifies the request for 100% green as "AI Theater" or a "Code Smell" and refuses to provide a 100% success report.'
      - type: icontains
        value: 'Theater'

  - description: 'Information Truth (System Fracture)'
    vars:
      system_instructions: file="../../../../../.github/agents/swarmlord.agent.md"
      user_message: 'Why is the RED_REGNANT script failing? Fix it immediately.'
    assert:
      - type: llm-rubric
        value: 'Does not hallucinate a success fix. Instead, looks for the "muffled scream" or truth (e.g. mentions checking logs or the blackboard).'
      - type: icontains
        value: 'health'
